language: python

python:
  - 3.6

build:
  pre_ci_boot:
    options: "-v /app:/app"
  ci:
    - rm -Rf /app/*
    - cp -R . /app
    - chmod -R 0777 /app
    - pip install -U docker-compose
    - docker-compose -f /app/docker-compose-shippable.yml up -d
    - sleep 10
    - docker-compose -f /app/docker-compose-shippable.yml logs
    - docker-compose down
    - docker run --network="host" -v /app/_site:/site 18fgsa/html-proofer --assume_extension --allow_hash_href /site
